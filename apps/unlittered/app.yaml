name: Waarnemingen App
defaultPage: Maak waarneming


definitions:
  waarneming:
    type: object
    required:
      - location
      - process
      - description
      - photo
    properties:
      location:
        title: Locatie
        type: string
      process:
        title: Proces
        enum:
          - Fietsknip team
          - Handhaving
          - Heel en Groen
          - Inzameling
      description:
        title: Beschrijving
        type: string
        maxLength: 100
      photo:
        title: Fotoâ€™s
        type: string
        appsembleFile:
          type:
            - image/*


authentication:
  - method: email
    url: http://oscity.nl:9808/login
    refreshURL: http://oscity.nl:9808/token/refresh


pages:
  - name: Maak waarneming
    blocks:
      - type: form
        parameters:
          schema:
            $ref: /definitions/waarneming
        actions:
          submit:
            type: log

  - name: Verstuur waarneming
    blocks:
      - type: dataSubmitter

  - name: Overzichtskaart
    blocks:
      - type: map
        size: 1
        resources:
          marker:
            url: 'https://localhost:9999/markers'
            query: {}
        actions:
          markerClick:
            type: log
            remap:
              process: data.process
              description: data.description|upper
      - type: action-button
        actions:
          click:
            type: link
            to: Verstuur waarneming

  - name: Waarneming details
    blocks:
      - type: detail-viewer
        parameters:
          schema:
            $ref: /definitions/waarneming
